replicaCount: 1

image:
  imageRegistry: "registry-2.yunna.net"
  repository: xiaozhu674/gameservermanager
  tag: "2.0.2"
  pullPolicy: IfNotPresent

nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  ports:
    - name: steam-tcp
      port: 27015
      targetPort: 27015
      protocol: TCP
      nodePort: null
    - name: steam-udp
      port: 27015
      targetPort: 27015
      protocol: UDP
      nodePort: null
    - name: web
      port: 5000
      targetPort: 5000
      protocol: TCP
      nodePort: null

extraPorts:
  - name: steam-tcp-1
    port: 27016
    targetPort: 27016
    protocol: TCP
  - name: steam-udp-1
    port: 27016
    targetPort: 27016
    protocol: UDP
  - name: steam-tcp-2
    port: 27017
    targetPort: 27017
    protocol: TCP
  - name: steam-udp-2
    port: 27017
    targetPort: 27017
    protocol: UDP
  - name: steam-tcp-3
    port: 27018
    targetPort: 27018
    protocol: TCP
  - name: steam-udp-3
    port: 27018
    targetPort: 27018
    protocol: UDP
  - name: steam-tcp-4
    port: 27019
    targetPort: 27019
    protocol: TCP
  - name: steam-udp-4
    port: 27019
    targetPort: 27019
    protocol: UDP
  - name: steam-tcp-5
    port: 27020
    targetPort: 27020
    protocol: TCP
  - name: steam-udp-5
    port: 27020
    targetPort: 27020
    protocol: UDP

resources:
  limits:
    cpu: 4000m
    memory: 8Gi
  requests:
    cpu: 2000m
    memory: 4Gi

persistence:
  enabled: true
  accessMode: ReadWriteOnce
  size: 20Gi
  storageClass: "local"
  gameDataMountPath: /home/steam/games
  gameFileMountPath: /home/steam/.config

livenessProbe:
  enabled: false
  port: steam-tcp
  initialDelaySeconds: 30
  periodSeconds: 10

readinessProbe:
  enabled: false
  port: steam-tcp
  initialDelaySeconds: 15
  periodSeconds: 5

env:
  env1:
    name: TZ
    value: "Asia/Shanghai"
  env2:
    name: USE_GUNICORN
    value: "true"
  env3:
    name: GUNICORN_WORKERS
    value: "1"
  env4:
    name: GUNICORN_TIMEOUT
    value: "120"
  env5:
    name: AUTO_UPDATE
    value: "true"
  env6:
    name: GAME_TO_RUN
    value: ""
  env7:
    name: GAME_ARGS
    value: ""
  env8:
    name: KEEP_RUNNING
    value: "true"

securityContext:
  privileged: true
  runAsUser: 0

interactiveTerminal:
  enabled: true

nodeSelector: {}
tolerations: []
affinity: {}

command: /home/steam/start_web.sh 